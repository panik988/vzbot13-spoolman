2025-11-07 00:00:00:INFO:Performing scheduled database backup.
2025-11-07 00:00:00:INFO:Deleting oldest backup /root/.local/share/spoolman/backups/spoolman.db.5
2025-11-07 00:00:00:INFO:Backing up SQLite database to /root/.local/share/spoolman/backups/spoolman.db
2025-11-07 00:00:00:INFO:Copied 1 of 24 pages.
2025-11-07 00:00:00:INFO:Copied 2 of 24 pages.
2025-11-07 00:00:00:INFO:Copied 3 of 24 pages.
2025-11-07 00:00:00:INFO:Copied 4 of 24 pages.
2025-11-07 00:00:00:INFO:Copied 5 of 24 pages.
2025-11-07 00:00:00:INFO:Copied 6 of 24 pages.
2025-11-07 00:00:00:INFO:Copied 7 of 24 pages.
2025-11-07 00:00:00:INFO:Copied 8 of 24 pages.
2025-11-07 00:00:00:INFO:Copied 9 of 24 pages.
2025-11-07 00:00:00:INFO:Copied 10 of 24 pages.
2025-11-07 00:00:00:INFO:Copied 11 of 24 pages.
2025-11-07 00:00:00:INFO:Copied 12 of 24 pages.
2025-11-07 00:00:00:INFO:Copied 13 of 24 pages.
2025-11-07 00:00:00:INFO:Copied 14 of 24 pages.
2025-11-07 00:00:00:INFO:Copied 15 of 24 pages.
2025-11-07 00:00:00:INFO:Copied 16 of 24 pages.
2025-11-07 00:00:00:INFO:Copied 17 of 24 pages.
2025-11-07 00:00:00:INFO:Copied 18 of 24 pages.
2025-11-07 00:00:00:INFO:Copied 19 of 24 pages.
2025-11-07 00:00:00:INFO:Copied 20 of 24 pages.
2025-11-07 00:00:00:INFO:Copied 21 of 24 pages.
2025-11-07 00:00:00:INFO:Copied 22 of 24 pages.
2025-11-07 00:00:00:INFO:Copied 23 of 24 pages.
2025-11-07 00:00:00:INFO:Copied 24 of 24 pages.
2025-11-07 00:00:00:INFO:Backup complete.
2025-11-07 00:34:00:INFO:Syncing external DB.
2025-11-07 00:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/filaments.json "HTTP/1.1 200 OK"
2025-11-07 00:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/materials.json "HTTP/1.1 200 OK"
2025-11-07 00:34:00:INFO:External DB synced. Filaments: 6325, Materials: 32
2025-11-07 01:34:00:INFO:Syncing external DB.
2025-11-07 01:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/filaments.json "HTTP/1.1 200 OK"
2025-11-07 01:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/materials.json "HTTP/1.1 200 OK"
2025-11-07 01:34:00:INFO:External DB synced. Filaments: 6325, Materials: 32
2025-11-07 02:34:00:INFO:Syncing external DB.
2025-11-07 02:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/filaments.json "HTTP/1.1 200 OK"
2025-11-07 02:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/materials.json "HTTP/1.1 200 OK"
2025-11-07 02:34:01:INFO:External DB synced. Filaments: 6325, Materials: 32
2025-11-07 03:34:00:INFO:Syncing external DB.
2025-11-07 03:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/filaments.json "HTTP/1.1 200 OK"
2025-11-07 03:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/materials.json "HTTP/1.1 200 OK"
2025-11-07 03:34:00:INFO:External DB synced. Filaments: 6325, Materials: 32
2025-11-07 04:34:00:INFO:Syncing external DB.
2025-11-07 04:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/filaments.json "HTTP/1.1 200 OK"
2025-11-07 04:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/materials.json "HTTP/1.1 200 OK"
2025-11-07 04:34:00:INFO:External DB synced. Filaments: 6325, Materials: 32
2025-11-07 05:34:00:INFO:Syncing external DB.
2025-11-07 05:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/filaments.json "HTTP/1.1 200 OK"
2025-11-07 05:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/materials.json "HTTP/1.1 200 OK"
2025-11-07 05:34:00:INFO:External DB synced. Filaments: 6325, Materials: 32
2025-11-07 06:34:00:INFO:Syncing external DB.
2025-11-07 06:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/filaments.json "HTTP/1.1 200 OK"
2025-11-07 06:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/materials.json "HTTP/1.1 200 OK"
2025-11-07 06:34:00:INFO:External DB synced. Filaments: 6325, Materials: 32
2025-11-07 07:34:00:INFO:Syncing external DB.
2025-11-07 07:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/filaments.json "HTTP/1.1 200 OK"
2025-11-07 07:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/materials.json "HTTP/1.1 200 OK"
2025-11-07 07:34:00:INFO:External DB synced. Filaments: 6325, Materials: 32
2025-11-07 08:34:00:INFO:Syncing external DB.
2025-11-07 08:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/filaments.json "HTTP/1.1 200 OK"
2025-11-07 08:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/materials.json "HTTP/1.1 200 OK"
2025-11-07 08:34:00:INFO:External DB synced. Filaments: 6325, Materials: 32
2025-11-07 09:34:00:INFO:Syncing external DB.
2025-11-07 09:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/filaments.json "HTTP/1.1 200 OK"
2025-11-07 09:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/materials.json "HTTP/1.1 200 OK"
2025-11-07 09:34:00:INFO:External DB synced. Filaments: 6325, Materials: 32
2025-11-07 10:24:33:INFO:Client 192.168.1.102 has stopped listening on pool spool
2025-11-07 10:25:02:INFO:Client 192.168.1.128 is now listening on pool spool
2025-11-07 10:26:13:INFO:Client 192.168.1.128 has stopped listening on pool spool
2025-11-07 10:26:49:INFO:Client 192.168.1.102 is now listening on pool spool
2025-11-07 10:34:00:INFO:Syncing external DB.
2025-11-07 10:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/filaments.json "HTTP/1.1 200 OK"
2025-11-07 10:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/materials.json "HTTP/1.1 200 OK"
2025-11-07 10:34:00:INFO:External DB synced. Filaments: 6325, Materials: 32
2025-11-07 11:34:00:INFO:Syncing external DB.
2025-11-07 11:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/filaments.json "HTTP/1.1 200 OK"
2025-11-07 11:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/materials.json "HTTP/1.1 200 OK"
2025-11-07 11:34:00:INFO:External DB synced. Filaments: 6325, Materials: 32
2025-11-07 12:34:00:INFO:Syncing external DB.
2025-11-07 12:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/filaments.json "HTTP/1.1 200 OK"
2025-11-07 12:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/materials.json "HTTP/1.1 200 OK"
2025-11-07 12:34:00:INFO:External DB synced. Filaments: 6325, Materials: 32
2025-11-07 13:34:00:INFO:Syncing external DB.
2025-11-07 13:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/filaments.json "HTTP/1.1 200 OK"
2025-11-07 13:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/materials.json "HTTP/1.1 200 OK"
2025-11-07 13:34:00:INFO:External DB synced. Filaments: 6325, Materials: 32
2025-11-07 14:34:00:INFO:Syncing external DB.
2025-11-07 14:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/filaments.json "HTTP/1.1 200 OK"
2025-11-07 14:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/materials.json "HTTP/1.1 200 OK"
2025-11-07 14:34:00:INFO:External DB synced. Filaments: 6325, Materials: 32
2025-11-07 15:34:00:INFO:Syncing external DB.
2025-11-07 15:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/filaments.json "HTTP/1.1 200 OK"
2025-11-07 15:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/materials.json "HTTP/1.1 200 OK"
2025-11-07 15:34:00:INFO:External DB synced. Filaments: 6325, Materials: 32
2025-11-07 16:34:00:INFO:Syncing external DB.
2025-11-07 16:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/filaments.json "HTTP/1.1 200 OK"
2025-11-07 16:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/materials.json "HTTP/1.1 200 OK"
2025-11-07 16:34:00:INFO:External DB synced. Filaments: 6325, Materials: 32
2025-11-07 17:34:00:INFO:Syncing external DB.
2025-11-07 17:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/filaments.json "HTTP/1.1 200 OK"
2025-11-07 17:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/materials.json "HTTP/1.1 200 OK"
2025-11-07 17:34:00:INFO:External DB synced. Filaments: 6325, Materials: 32
2025-11-07 18:31:46:INFO:Client 192.168.1.102 has stopped listening on pool spool
2025-11-07 18:34:00:INFO:Syncing external DB.
2025-11-07 18:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/filaments.json "HTTP/1.1 200 OK"
2025-11-07 18:34:01:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/materials.json "HTTP/1.1 200 OK"
2025-11-07 18:34:01:INFO:External DB synced. Filaments: 6325, Materials: 32
2025-11-07 19:10:20:INFO:Client 192.168.1.102 is now listening on pool spool
2025-11-07 19:11:07:INFO:Client 192.168.1.89 is now listening on pool spool
2025-11-07 19:11:10:INFO:Client 192.168.1.102 has stopped listening on pool spool
2025-11-07 19:11:57:INFO:Client 192.168.1.89 has stopped listening on pool spool
2025-11-07 19:11:57:INFO:Client 192.168.1.128 is now listening on pool spool
2025-11-07 19:13:27:INFO:Client 192.168.1.128 has stopped listening on pool spool
2025-11-07 19:13:44:INFO:Client 192.168.1.102 is now listening on pool spool
2025-11-07 19:34:00:INFO:Syncing external DB.
2025-11-07 19:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/filaments.json "HTTP/1.1 200 OK"
2025-11-07 19:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/materials.json "HTTP/1.1 200 OK"
2025-11-07 19:34:00:INFO:External DB synced. Filaments: 6325, Materials: 32
2025-11-07 20:00:05:INFO:Client 192.168.1.102 has stopped listening on pool spool
2025-11-07 20:00:35:INFO:Client 192.168.1.128 is now listening on pool spool
2025-11-07 20:01:45:INFO:Client 192.168.1.128 has stopped listening on pool spool
2025-11-07 20:01:45:ERROR:Failed to send websocket message
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/dist-packages/websockets/legacy/protocol.py", line 1279, in close_connection
    await self.transfer_data_task
  File "/usr/local/lib/python3.11/dist-packages/websockets/legacy/protocol.py", line 945, in transfer_data
    message = await self.read_message()
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/dist-packages/websockets/legacy/protocol.py", line 1015, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/dist-packages/websockets/legacy/protocol.py", line 1090, in read_data_frame
    frame = await self.read_frame(max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/dist-packages/websockets/legacy/protocol.py", line 1147, in read_frame
    frame = await Frame.read(
            ^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/dist-packages/websockets/legacy/framing.py", line 71, in read
    data = await reader(2)
           ^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/asyncio/streams.py", line 728, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.11/asyncio/streams.py", line 522, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/dist-packages/uvicorn/protocols/websockets/websockets_impl.py", line 331, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/dist-packages/websockets/legacy/protocol.py", line 620, in send
    await self.ensure_open()
  File "/usr/local/lib/python3.11/dist-packages/websockets/legacy/protocol.py", line 930, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: sent 1011 (internal error) keepalive ping timeout; no close frame received

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/dist-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/usr/local/lib/python3.11/dist-packages/starlette/_exception_handler.py", line 39, in sender
    await send(message)
  File "/usr/local/lib/python3.11/dist-packages/starlette/_exception_handler.py", line 39, in sender
    await send(message)
  File "/usr/local/lib/python3.11/dist-packages/uvicorn/protocols/websockets/websockets_impl.py", line 344, in asgi_send
    raise ClientDisconnected from exc
uvicorn.protocols.utils.ClientDisconnected

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/opt/spoolman/spoolman/database/spool.py", line 443, in spool_changed
    await websocket_manager.send(
  File "/opt/spoolman/spoolman/ws.py", line 99, in send
    await self.tree.send(pool, evt)
  File "/opt/spoolman/spoolman/ws.py", line 69, in send
    await self.children[path[0]].send(path[1:], evt)
  File "/opt/spoolman/spoolman/ws.py", line 65, in send
    await websocket.send_text(evt.json())
  File "/usr/local/lib/python3.11/dist-packages/starlette/websockets.py", line 165, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/usr/local/lib/python3.11/dist-packages/starlette/websockets.py", line 88, in send
    raise WebSocketDisconnect(code=1006)
starlette.websockets.WebSocketDisconnect
2025-11-07 20:02:22:INFO:Client 192.168.1.102 is now listening on pool spool
2025-11-07 20:34:00:INFO:Syncing external DB.
2025-11-07 20:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/filaments.json "HTTP/1.1 200 OK"
2025-11-07 20:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/materials.json "HTTP/1.1 200 OK"
2025-11-07 20:34:00:INFO:External DB synced. Filaments: 6325, Materials: 32
2025-11-07 20:48:51:INFO:Client 192.168.1.102 has stopped listening on pool spool
2025-11-07 20:49:02:INFO:Client 192.168.1.102 is now listening on pool spool
2025-11-07 21:34:00:INFO:Syncing external DB.
2025-11-07 21:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/filaments.json "HTTP/1.1 200 OK"
2025-11-07 21:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/materials.json "HTTP/1.1 200 OK"
2025-11-07 21:34:00:INFO:External DB synced. Filaments: 6325, Materials: 32
2025-11-07 22:34:00:INFO:Syncing external DB.
2025-11-07 22:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/filaments.json "HTTP/1.1 200 OK"
2025-11-07 22:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/materials.json "HTTP/1.1 200 OK"
2025-11-07 22:34:00:INFO:External DB synced. Filaments: 6325, Materials: 32
2025-11-07 23:34:00:INFO:Syncing external DB.
2025-11-07 23:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/filaments.json "HTTP/1.1 200 OK"
2025-11-07 23:34:00:INFO:HTTP Request: GET https://donkie.github.io/SpoolmanDB/materials.json "HTTP/1.1 200 OK"
2025-11-07 23:34:00:INFO:External DB synced. Filaments: 6325, Materials: 32
